@model PhoneBook.Core.Entities.User?

@{
    ViewData["Title"] = "PhoneBook";
    ViewBag.Title = "صفحه اصلی";
}

@section Styles {
    <link rel="stylesheet" type="text/css" href="~/css/index.css" />
}

<!-- محتوای صفحه با استفاده از Flexbox تقسیم‌بندی شده -->
<div class="content-wrapper">
    <!-- ستون سمت چپ (۲۰٪ عرض) با منوها -->
    <div class="left-panel">
        <h1>خوش آمدید، @(Model?.DisplayName ?? "کاربر عزیز")!</h1>
        <div class="menu-item" id="displayList">نمایش لیست</div>
        <div class="menu-item" id="search">جست و جو</div>
        @if (Model != null && Model.Username.ToLower() == "admin")
        {
            <div class="menu-item" id="addPerson">اضافه کردن نفر</div>
        }
        <!-- دکمه خروج -->
        <div class="menu-item" id="logout">خروج</div>
    </div>

    <!-- ستون سمت راست (۸۰٪ عرض) -->
    <div class="right-panel" id="mainSection">
        <!-- بخش پیام پیش‌فرض -->
        <div id="defaultContent">
            <p style="text-align:center; padding:20px;">
                لطفاً یکی از گزینه‌های منو را انتخاب کنید.
            </p>
        </div>
    </div>
</div>

@if (TempData["AddContactMessage"] != null && TempData["AddContactSuccess"] != null)
{
    var isSuccess = (bool)TempData!["AddContactSuccess"]!;
    var message = TempData["AddContactMessage"]!.ToString();
    // انتخاب رنگ پس‌زمینه: سبز برای موفق و قرمز برای ناموفق
    var bgColor = isSuccess ? "lightgreen" : "lightcoral";
    var title = isSuccess ? "ثبت‌  موفق اطلاعات تماس!" : "خطا در ثبت‌ اطلاعات تماس!";  
    @section Scripts {
        <script>
            // استفاده از سریالایزر JSON برای اطمینان از انتقال صحیح رشته‌ها
            var modalTitle = @Html.Raw(System.Text.Json.JsonSerializer.Serialize(title));
            var modalMessage = @Html.Raw(System.Text.Json.JsonSerializer.Serialize(message));
            var modalBgColor = @Html.Raw(System.Text.Json.JsonSerializer.Serialize(bgColor));
            showRegistrationModal(modalTitle, modalMessage, modalBgColor);
        </script>
    }
}

<!-- اضافه کردن jQuery از CDN و اسکریپت تغییر محتویات سمت راست بر اساس منو -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="~/js/index.js"></script>